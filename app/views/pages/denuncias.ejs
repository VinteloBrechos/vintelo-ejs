<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vintélo</title>
    <link rel="stylesheet" href="css/denuncias.css">
    <link rel="icon" href="/imagens/brilhoescuro.png" type="image/x-icon">
</head>
<body>
    <!-- Header Mobile -->
    <section class="oculto-desktop">
        <header>
            <nav class="grid">
                <a href="/homeadm">
                    <img src="imagens/seta.png" alt="Voltar">
                </a>
                <img src="imagens/logo.png" alt="Logo">
                <img src="imagens/foto-branca.png" class="img-branca">
            </nav>
        </header>
    </section>

    <!-- Header Desktop -->
    <section class="oculto-mobile">
        <section class="discount-banner">
            <span class="highlight">Painel Administrativo - Denúncias</span>
        </section>
        <header class="main-header">
            <a href="/homeadm">
                <img src="imagens/logo.png" class="img-logo">
            </a>
            <nav>
                <a href="/homeadm">Home Admin</a>
                <a href="/blogadm">Blog</a>
                <a href="/denuncias">Denúncias</a>
                <a href="/avaliacaoadm">Avaliações</a>
            </nav>
            <section class="search-profile">
                <form>
                    <input type="text" placeholder="Buscar...">
                </form>
                <ul>
                    <li><a href="/homeadm"><img src="imagens/icone sem cadastro.png" class="maria"></a></li>
                    <li><a href="/homeadm"><img src="imagens/icone saco.png" class="img-tamanho"></a></li>
                    <li><a href="/homeadm"><img src="imagens/icone coraçao.png" class="img-tamanho2"></a></li>
                </ul>
            </section>
        </header>
    </section>

    <main class="admin-container">
        <section class="admin-header">
            <h1>Gerenciar Denúncias</h1>
            <p>Visualize e gerencie denúncias de usuários e perfis</p>
        </section>

        <!-- Filtros -->
        <section class="filters-section">
            <select class="filter-select">
                <option value="todas">Todas as denúncias</option>
                <option value="pendentes">Pendentes</option>
                <option value="analisadas">Analisadas</option>
                <option value="resolvidas">Resolvidas</option>
            </select>
            <select class="filter-select">
                <option value="todos">Todos os tipos</option>
                <option value="perfil">Perfil inadequado</option>
                <option value="produto">Produto irregular</option>
                <option value="comportamento">Comportamento</option>
            </select>
        </section>

        <!-- Lista de Denúncias -->
        <section class="denuncias-list">
            <% if (typeof denuncias !== 'undefined' && denuncias.length > 0) { %>
                <% denuncias.forEach(function(denuncia) { %>
                    <article class="denuncia-card" data-id="<%= denuncia.ID_DENUNCIA %>" data-status="<%= denuncia.STATUS || 'pendente' %>">
                        <section class="denuncia-header">
                            <span class="status-badge <%= denuncia.STATUS || 'pendente' %>"><%= denuncia.STATUS === 'analisando' ? 'Em análise' : denuncia.STATUS === 'resolvida' ? 'Resolvida' : 'Pendente' %></span>
                            <span class="data"><%= new Date(denuncia.DATA_DENUNCIA).toLocaleDateString('pt-BR') %></span>
                        </section>
                        
                        <section class="denuncia-content">
                            <section class="perfil-denunciado">
                                <img src="imagens/icone sem cadastro.png" alt="Perfil" class="perfil-img">
                                <section class="perfil-info">
                                    <h3>@<%= denuncia.USER_ALVO || 'usuário' %></h3>
                                    <p><%= denuncia.NOME_ALVO || 'Nome não disponível' %></p>
                                    <span class="tipo-usuario"><%= denuncia.TIPO_ALVO %></span>
                                </section>
                            </section>
                            
                            <section class="denuncia-detalhes">
                                <h4>Tipo: <%= denuncia.MOTIVO %></h4>
                                <p class="motivo"><%= denuncia.DESCRICAO || 'Sem descrição adicional' %></p>
                                <p class="denunciante">Denunciado por: @<%= denuncia.USER_DENUNCIANTE %></p>
                                <% if (denuncia.RESOLUCAO) { %>
                                    <p class="resolucao"><strong>Resolução:</strong> <%= denuncia.RESOLUCAO %></p>
                                <% } %>
                            </section>
                        </section>
                        
                        <section class="denuncia-actions">
                            <% if (denuncia.STATUS === 'resolvida') { %>
                                <span class="status-text">Caso resolvido</span>
                            <% } else { %>
                                <button class="btn-analisar" onclick="analisarDenuncia(<%= denuncia.ID_DENUNCIA %>)">Analisar</button>
                                <button class="btn-resolver" onclick="resolverDenuncia(<%= denuncia.ID_DENUNCIA %>)">Resolver</button>
                                <button class="btn-rejeitar" onclick="rejeitarDenuncia(<%= denuncia.ID_DENUNCIA %>)">Rejeitar</button>
                            <% } %>
                        </section>
                    </article>
                <% }); %>
            <% } else { %>
                <!-- Denúncia 1 -->
                <article class="denuncia-card" data-id="1" data-status="pendente">
                    <section class="denuncia-header">
                        <span class="status-badge pendente">Pendente</span>
                        <span class="data">15/12/2024</span>
                    </section>
                    
                    <section class="denuncia-content">
                        <section class="perfil-denunciado">
                            <img src="imagens/brecho1.png" alt="Perfil" class="perfil-img">
                            <section class="perfil-info">
                                <h3>@mayte_brechó</h3>
                                <p>Mayte Silva</p>
                                <span class="tipo-usuario">Vendedor</span>
                            </section>
                        </section>
                        
                        <section class="denuncia-detalhes">
                            <h4>Tipo: Perfil inadequado</h4>
                            <p class="motivo">Usuário está vendendo produtos falsificados e usando imagens de outros perfis.</p>
                            <p class="denunciante">Denunciado por: @maria_cliente</p>
                        </section>
                    </section>
                    
                    <section class="denuncia-actions">
                        <button class="btn-analisar" onclick="analisarDenuncia(1)">Analisar</button>
                        <button class="btn-resolver" onclick="resolverDenuncia(1)">Resolver</button>
                        <button class="btn-rejeitar" onclick="rejeitarDenuncia(1)">Rejeitar</button>
                    </section>
                </article>

                <!-- Denúncia 2 -->
                <article class="denuncia-card" data-id="2" data-status="analisada">
                    <section class="denuncia-header">
                        <span class="status-badge analisada">Em análise</span>
                        <span class="data">14/12/2024</span>
                    </section>
                    
                    <section class="denuncia-content">
                        <section class="perfil-denunciado">
                            <img src="imagens/brecho2.png" alt="Perfil" class="perfil-img">
                            <section class="perfil-info">
                                <h3>@karine_vintage</h3>
                                <p>Karine Santos</p>
                                <span class="tipo-usuario">Vendedor</span>
                            </section>
                        </section>
                        
                        <section class="denuncia-detalhes">
                            <h4>Tipo: Comportamento inadequado</h4>
                            <p class="motivo">Vendedor está sendo agressivo com clientes nos comentários e não entrega produtos.</p>
                            <p class="denunciante">Denunciado por: @ana_compras</p>
                        </section>
                    </section>
                    
                    <section class="denuncia-actions">
                        <button class="btn-analisar" onclick="analisarDenuncia(2)">Analisar</button>
                        <button class="btn-resolver" onclick="resolverDenuncia(2)">Resolver</button>
                        <button class="btn-rejeitar" onclick="rejeitarDenuncia(2)">Rejeitar</button>
                    </section>
                </article>

                <!-- Denúncia 3 -->
                <article class="denuncia-card" data-id="3" data-status="resolvida">
                    <section class="denuncia-header">
                        <span class="status-badge resolvida">Resolvida</span>
                        <span class="data">12/12/2024</span>
                    </section>
                    
                    <section class="denuncia-content">
                        <section class="perfil-denunciado">
                            <img src="imagens/icone sem cadastro.png" alt="Perfil" class="perfil-img">
                            <section class="perfil-info">
                                <h3>@joao_cliente</h3>
                                <p>João Oliveira</p>
                                <span class="tipo-usuario">Comprador</span>
                            </section>
                        </section>
                        
                        <section class="denuncia-detalhes">
                            <h4>Tipo: Comportamento inadequado</h4>
                            <p class="motivo">Cliente fazendo comentários ofensivos em produtos de vendedores.</p>
                            <p class="denunciante">Denunciado por: @loja_vintage</p>
                            <p class="resolucao"><strong>Resolução:</strong> Usuário advertido e comentários removidos.</p>
                        </section>
                    </section>
                    
                    <section class="denuncia-actions">
                        <span class="status-text">Caso resolvido</span>
                    </section>
                </article>
            <% } %>
        </section>
    </main>

    <script>
        function analisarDenuncia(id) {
            window.location.href = `/denuncias/analisar/${id}`;
        }

        function resolverDenuncia(id) {
            const resolucao = prompt('Digite a resolução da denúncia:');
            if (resolucao) {
                alert(`Denúncia ${id} resolvida: ${resolucao}`);
            }
        }

        function rejeitarDenuncia(id) {
            if (confirm(`Tem certeza que deseja rejeitar a denúncia ${id}?`)) {
                alert(`Denúncia ${id} rejeitada`);
            }
        }
    </script>

    <footer class="footer">
        <img src="imagens/logo2.jpeg" alt="Vintélo" class="footer-image">
        <section class="social-media">
            <p class="p-footer">Siga nossas redes sociais</p>
            <ul class="social-links">
                <li class="social-link">
                    <a href="https://www.instagram.com/vintelobrechos" target="_blank">
                        <img src="imagens/Instagram.png" alt="Instagram">
                    </a>
                </li>
                <li class="social-link">
                    <a href="https://facebook.com/vintelo" target="_blank">
                        <img src="imagens/Facebook.png" alt="Facebook">
                    </a>
                </li>
                <li class="social-link">
                    <a href="https://pinterest.com/vintelo" target="_blank">
                        <img src="imagens/Pinterest.png" alt="Pinterest">
                    </a>
                </li>
            </ul>
        </section>
        <p class="copyright">©2024 Vintélo. Todos os direitos reservados.</p>
    </footer>
</body>
</html>